<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="style.css">
	<title></title>
</head>
<body>
	<div class = "jumbotron">
		<div class = "container">
			<h1>Route Price Calculator</h1>
			<p>This website will find cost of a car trip based on the fuel prices near the starting point.</p>
			<form class = "form-horizontal">
				<div class = "from-group">
					<input type="text" id = "from" placeholder="Origin">
				</div>

				<div class = "to-group">
					<input type="text" id = "to" placeholder="Destination">
				</div>
				<div class = 'fuel-efficiency-group'>
					<input type="text" id = "fuel-efficiency" placeholder="Fuel Efficiency (km / L)">
				</div>
				<div class = "gasType">
					<select id = 'fuelTypeSelect'>
						<option value = '1'>Regular</option>
						<option value = '2'>Mid-Grade</option>
						<option value = '3'>Premium</option>
						<option value = '4'>Diesel</option>
					</select>
				</div>
				<button type = "button" onclick="print();">Go!</button>
			</form>

			<div class = "container-fluid">
				<div id = "map">
					
				</div>
				<div id = "output" class = 'alert-info'>
					
				</div>
			</div>
		</div>
			
	</div>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB4vosso-6aM8clv5e-r5EQszImi32ozB8&libraries=places"></script>
		<script src="https://apis.google.com/js/api.js" type="text/javascript"></script>
		<script type="text/javascript" src = "app.js"></script>
		<script type="text/javascript" src = "functions.js"></script>
		<script type="text/javascript">
			async function print () {
				const data = await getInfo(); 
				city = await getCity(data)
				longProvince = await getProvince(data,true)
				shortProvince = await getProvince(data,false)
				country = await getCountry(data)
				fuelType = parseInt(document.getElementById('fuelTypeSelect').value)
				fuelEfficiency = parseInt(document.getElementById('fuel-efficiency').value)
				fuelData = await getGas(city,longProvince,shortProvince,country, fuelType); 

				start = document.getElementById('from').value
				end = document.getElementById('to').value

				distance = parseFloat((await getDistance()).split(" ")[0]);
				fuelVolume = distance/fuelEfficiency; 
				fuelPrice= fuelData.data.locationByArea.stations.results[0].prices[0].credit.price/100; 

				cost = fuelVolume * fuelPrice;


				document.getElementById('output').innerHTML = 'From: ' + start 
				+ '<br>To: ' + end 
				+ '<br>Distance: ' + distance + ' km'
				+ '<br>Fuel Price: ' + fuelPrice*100
				+ '<br>Route Cost: $' + cost.toFixed(2);
			}
		</script>

	</body>
</html>